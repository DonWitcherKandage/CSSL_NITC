<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NITC 2025 - Modern Display 1 (Agenda)</title>
    <link rel="stylesheet" href="styles-modern.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="description" content="NITC 2025 Conference - Real-time agenda display with modern design">
    <meta name="keywords" content="NITC 2025, conference, agenda, technology, Sri Lanka">
</head>
<body>
    <!-- Animated Background -->
    <div class="background-animation"></div>
    
    <!-- Main Container -->
    <div class="main-container">
        <!-- Single Screen - Display 1 (Agenda) -->
        <div class="screen screen-1">
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-indicators">
                    <div class="status-badge">
                        <div class="status-dot"></div>
                        <span>LIVE</span>
                    </div>
                </div>
                
                <div class="digital-clock" id="digitalClock">
                    00:00:00
                </div>
            </div>

            <!-- Conference Header -->
            <div class="conference-header">
                <div class="conference-logo">
                    N
                </div>
                <div class="conference-title">NITC 2025</div>
                <div class="conference-subtitle">Fostering a Human Centric Nation - Towards Society 5.0</div>
                <div class="conference-day" id="conferenceDay">Inauguration</div>
            </div>

            <!-- Agenda Container -->
            <div id="agendaContainer" class="agenda-container">
                <!-- Current Event Card -->
                <div class="current-event-card active" id="currentEventCard">
                    <div class="event-time">12:00 PM</div>
                    <div class="event-title">Arrival of the Chief Guest & the Guest of Honour</div>
                    <div class="event-duration">20 minutes</div>
                    <div class="event-speaker">Conference Organizers</div>
                </div>

                <!-- Upcoming Events Section -->
                <div class="upcoming-events">
                    <div class="section-title">Upcoming Events</div>
                    <div id="upcomingEventsList">
                        <!-- Upcoming events will be populated by JavaScript -->
                        <div class="upcoming-event" data-index="1">
                            <div class="event-time">12:20 PM</div>
                            <div class="event-title">Welcome Address by Mr. Heshan Karunaratne</div>
                            <div class="event-duration">10 minutes</div>
                            <div class="event-speaker">Mr. Heshan Karunaratne - President, CSSL</div>
                        </div>
                        
                        <div class="upcoming-event" data-index="2">
                            <div class="event-time">12:30 PM</div>
                            <div class="event-title">CSSL National ICT Awards 2025 - Session 1</div>
                            <div class="event-duration">15 minutes</div>
                            <div class="event-speaker">CSSL Awards Committee</div>
                        </div>
                        
                        <div class="upcoming-event" data-index="3">
                            <div class="event-time">12:45 PM</div>
                            <div class="event-title">Address by the Chief Guest</div>
                            <div class="event-duration">10 minutes</div>
                            <div class="event-speaker">Chief Guest</div>
                        </div>
                        
                        <div class="upcoming-event" data-index="4">
                            <div class="event-time">12:55 PM</div>
                            <div class="event-title">Address by the Guest of Honor</div>
                            <div class="event-duration">15 minutes</div>
                            <div class="event-speaker">Guest of Honor</div>
                        </div>
                        
                        <div class="upcoming-event" data-index="5">
                            <div class="event-time">1:10 PM</div>
                            <div class="event-title">Keynote Address By Mr. Sandun Hapugoda</div>
                            <div class="event-duration">20 minutes</div>
                            <div class="event-speaker">Mr. Sandun Hapugoda - Country Manager, Mastercard</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Indicators -->
            <div class="progress-container" id="progressContainer">
                <div class="progress-dot active"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
            </div>
        </div>
    </div>

    <!-- Debug Information (Hidden in Production) -->
    <div id="debugInfo" class="debug-info" style="display: none;">
        <div class="debug-title">System Debug</div>
        <div>Updates: <span id="debugUpdates">0</span></div>
        <div>Errors: <span id="debugErrors">0</span></div>
        <div>Performance: <span id="debugPerformance">0ms</span></div>
        <div>Mode: <span id="debugMode">Real-Time</span></div>
        <div>Sync: <span id="debugSync">Enabled</span></div>
    </div>

    <!-- Conference System Scripts -->
    <script src="model-modern.js"></script>
    <script src="view-modern.js"></script>
    <script src="controller-modern.js"></script>
    
    <!-- Display 1 Initialization Script -->
    <script>
        /* ============================================================================
           DISPLAY 1 INITIALIZATION - AGENDA SCREEN
           ============================================================================ */

        // Global application instance
        let conferenceApp = null;

        /**
         * Initialize Display 1 application
         */
        async function initializeDisplay1() {
            try {
                console.log('Initializing NITC 2025 Modern Display 1 (Agenda Screen)...');
                console.log('==============================================');
                
                // Create the conference application
                conferenceApp = new ModernConferenceController();
                
                // Wait for initialization to complete
                await new Promise(resolve => {
                    const checkInit = setInterval(() => {
                        if (conferenceApp.state.isRunning) {
                            clearInterval(checkInit);
                            resolve();
                        }
                    }, 100);
                });
                
                // Set up display-specific features
                setupDisplay1Features();
                
                // Initialize debug panel (hidden by default)
                initializeDebugPanel();
                
                console.log('Display 1 initialized successfully');
                console.log('- Real-time agenda tracking active');
                console.log('- Cross-display sync enabled');
                console.log('- Preview highlighting available');
                console.log('- Keyboard shortcuts enabled');
                console.log('==============================================');
                
                // Log available commands
                setTimeout(() => {
                    logDisplay1Commands();
                }, 2000);
                
            } catch (error) {
                console.error('Failed to initialize Display 1:', error);
                showInitializationError(error);
            }
        }

        /**
         * Set up Display 1 specific features
         */
        function setupDisplay1Features() {
            // Add keyboard shortcut for debug panel
            document.addEventListener('keydown', (e) => {
                if (e.key === 'D' || e.key === 'd') {
                    e.preventDefault();
                    toggleDebugPanel();
                }
            });
            
            // Add smooth scrolling for upcoming events
            const upcomingEvents = document.querySelector('.upcoming-events');
            if (upcomingEvents) {
                upcomingEvents.style.scrollBehavior = 'smooth';
            }
            
            // Set up auto-hide debug panel after 10 seconds if shown
            let debugTimeout = null;
            window.toggleDebugPanel = function() {
                const debugPanel = document.getElementById('debugInfo');
                if (debugPanel) {
                    const isVisible = debugPanel.style.display !== 'none';
                    debugPanel.style.display = isVisible ? 'none' : 'block';
                    
                    if (!isVisible) {
                        // Auto-hide after 10 seconds
                        if (debugTimeout) clearTimeout(debugTimeout);
                        debugTimeout = setTimeout(() => {
                            debugPanel.style.display = 'none';
                        }, 10000);
                    }
                }
            };
        }

        /**
         * Initialize debug panel updates
         */
        function initializeDebugPanel() {
            setInterval(() => {
                updateDebugPanel();
            }, 1000);
        }

        /**
         * Update debug panel information
         */
        function updateDebugPanel() {
            if (!conferenceApp) return;
            
            const status = conferenceApp.getSystemStatus();
            
            const debugElements = {
                debugUpdates: document.getElementById('debugUpdates'),
                debugErrors: document.getElementById('debugErrors'),
                debugPerformance: document.getElementById('debugPerformance'),
                debugMode: document.getElementById('debugMode'),
                debugSync: document.getElementById('debugSync')
            };
            
            if (debugElements.debugUpdates) {
                debugElements.debugUpdates.textContent = status.controller.updateCount;
            }
            
            if (debugElements.debugErrors) {
                debugElements.debugErrors.textContent = status.controller.errorCount;
            }
            
            if (debugElements.debugPerformance) {
                debugElements.debugPerformance.textContent = 
                    `${status.performance.averageUpdateDuration}ms`;
            }
            
            if (debugElements.debugMode) {
                debugElements.debugMode.textContent = status.controller.mode;
            }
            
            if (debugElements.debugSync) {
                debugElements.debugSync.textContent = 
                    status.sync.enabled ? 'Enabled' : 'Disabled';
            }
        }

        /**
         * Show initialization error
         */
        function showInitializationError(error) {
            const container = document.getElementById('agendaContainer');
            if (container) {
                container.innerHTML = `
                    <div class="waiting-state">
                        <div class="waiting-title">Initialization Error</div>
                        <div class="waiting-subtitle">Failed to start NITC 2025 Display System</div>
                        <div class="next-event-preview">
                            <div class="next-event-content">
                                <div style="color: var(--accent-blue); margin-bottom: 1rem;">
                                    Error: ${error.message}
                                </div>
                                <div>Please refresh the page</div>
                                <div style="margin-top: 0.5rem;">Check browser console for details</div>
                                <div style="margin-top: 0.5rem;">Contact technical support if issue persists</div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        /**
         * Log Display 1 specific commands
         */
        function logDisplay1Commands() {
            console.log('\n=== DISPLAY 1 COMMANDS ===');
            console.log('startPreview()       - Start event highlighting');
            console.log('stopPreview()        - Stop event highlighting');
            console.log('toggleDebugPanel()   - Show/hide debug panel');
            console.log('getViewStatus()      - Get view-specific status');
            console.log('');
            console.log('=== DISPLAY 1 SHORTCUTS ===');
            console.log('D                    - Toggle debug panel');
            console.log('P                    - Toggle preview mode');
            console.log('S                    - Show system status');
            console.log('');
            console.log('=== AUTO FEATURES ===');
            console.log('- Event highlighting every 12 seconds');
            console.log('- Smooth hover animations');
            console.log('- Cross-display synchronization');
            console.log('- Real-time clock updates');
            console.log('- Automatic day switching');
            console.log('========================\n');
        }

        /**
         * Enhanced preview mode functions for Display 1
         */
        window.startPreviewMode = function() {
            if (conferenceApp && conferenceApp.view) {
                conferenceApp.view.startPreviewHighlighting();
                console.log('Preview highlighting started - events will highlight every 12 seconds');
            }
        };

        window.stopPreviewMode = function() {
            if (conferenceApp && conferenceApp.view) {
                conferenceApp.view.stopPreviewHighlighting();
                console.log('Preview highlighting stopped');
            }
        };

        /**
         * Production mode function
         */
        window.enableProductionMode = function() {
            // Hide debug elements
            const debugPanel = document.getElementById('debugInfo');
            if (debugPanel) debugPanel.style.display = 'none';
            
            // Disable keyboard shortcuts except essential ones
            document.addEventListener('keydown', (e) => {
                if (['F5', 'F12'].includes(e.key)) return; // Allow refresh and dev tools
                if (e.ctrlKey || e.altKey || e.metaKey) return; // Allow system shortcuts
                e.preventDefault();
            });
            
            console.log('Production mode enabled - debugging features disabled');
        };

        // Global exposure for debugging
        window.conferenceApp = null;
        Object.defineProperty(window, 'conferenceApp', {
            get: () => conferenceApp,
            enumerable: true
        });

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeDisplay1);
        } else {
            initializeDisplay1();
        }

        // Handle page errors gracefully
        window.addEventListener('error', (event) => {
            console.error('Display 1 Error:', event.error);
            
            // Show user-friendly error if system hasn't initialized
            if (!conferenceApp) {
                showInitializationError(event.error);
            }
        });

        // Handle page unload
        window.addEventListener('beforeunload', () => {
            if (conferenceApp) {
                conferenceApp.cleanup();
            }
        });

        // Page visibility handling for better performance
        document.addEventListener('visibilitychange', () => {
            if (conferenceApp) {
                if (document.hidden) {
                    console.log('Display 1 tab hidden - reducing updates');
                } else {
                    console.log('Display 1 tab visible - resuming full updates');
                }
            }
        });

        console.log('Display 1 script loaded - waiting for DOM ready...');
    </script>

    <!-- Additional Styles for Display 1 -->
    <style>
        /* Display 1 specific overrides */
        .main-container {
            display: block;
        }
        
        .screen-1 {
            width: 100vw;
            height: 100vh;
        }
        
        /* Debug panel styling */
        .debug-info {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1rem;
            color: var(--text-white);
            font-size: 0.875rem;
            z-index: 1000;
            min-width: 200px;
        }
        
        .debug-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--accent-blue);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .debug-info div:not(.debug-title) {
            margin-bottom: 0.25rem;
            font-family: 'Inter', monospace;
        }
        
        /* Enhanced agenda container */
        .agenda-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Event speaker styling */
        .event-speaker {
            font-size: 0.8rem;
            color: var(--text-gray);
            margin-top: 0.5rem;
            font-style: italic;
            opacity: 0.9;
        }
        
        /* Improved responsive design for agenda */
        @media (max-width: 1024px) {
            .conference-header {
                padding: 1.5rem;
            }
            
            .current-event-card {
                margin: 1rem;
                padding: 1.5rem;
            }
            
            .event-time {
                font-size: 1.25rem;
            }
            
            .event-title {
                font-size: 1.1rem;
            }
        }
        
        @media (max-width: 768px) {
            .status-bar {
                padding: 0.75rem 1rem;
            }
            
            .digital-clock {
                font-size: 1.25rem;
                min-width: 160px;
            }
            
            .conference-title {
                font-size: 1.5rem;
            }
            
            .debug-info {
                top: 80px;
                right: 10px;
                min-width: 180px;
            }
        }
    </style>
</body>
</html>