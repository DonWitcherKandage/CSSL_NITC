<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NITC 2025 - On-Event Fold 720x1080</title>

    <!-- Particles (same lib used elsewhere) -->
    <script src="https://unpkg.com/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>

    <!-- Base styles if needed by components -->
    <link rel="stylesheet" href="styles.css" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Inter:wght@600;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; border-radius: 0 !important; }

        /* Match exact size as the folded 720x1080 reference (2 x 360x1080) */
        html, body {
            width: 720px;
            height: 1080px;
            overflow: hidden;
        }
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: radial-gradient(120% 120% at 50% 0%, #050d1c 0%, #030a17 45%, #010409 100%) !important;
            overflow: hidden; /* no scrolls */
            width: 720px; /* total fold width */
            height: 1080px; /* total fold height */
        }

        .folded-container {
            display: flex;
            width: 720px;
            height: 1080px;
            position: relative;
            /* rotor variables sized for 360x1080 panels */
            --rotor1-size: 600px;  /* larger crop bottom-left */
            --rotor2-size: 380px;  /* top-right */
            --rotor1-duration: 40s;
            --rotor2-duration: 120s;
        }

        .panel-left, .panel-right {
            width: 360px;
            height: 1080px;
            background: linear-gradient(180deg, #051022 0%, #0a2a4d 50%, #020a12 100%);
            position: relative;
            overflow: hidden;
            border: 0; box-shadow: none; outline: none;
            transform: translateZ(0);
        }
        /* Hide any center seam by overlapping left panel by 1px */
        .panel-left { margin-right: -1px; }

        #tsparticles-left, #tsparticles-right {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0; /* behind content */
        }

        /* Live indicator and clock, positioned like the reference */
        .panel-left .status-indicator {
            position: absolute;
            top: 8px; right: 8px;
            padding: 4px 10px;
            background: #e67e22 !important;
            color: #fff !important;
            border-radius: 12px !important;
            font-weight: bold !important;
            font-size: 0.7em !important;
            animation: blink 1.5s infinite;
            z-index: 1002;
        }
        .clock {
            position: absolute;
            top: 8px; left: 8px;
            padding: 4px 10px;
            background: rgba(0,0,0,0.5);
            color: #fff;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.75em;
            z-index: 1001;
        }

        /* Hide LIVE chip and clock on Screen 1 */
        .panel-left .status-indicator,
        .clock { display: none !important; }
        @keyframes blink { 0%,50%{opacity:1} 51%,100%{opacity:.3} }

        /* Content layers */
        .agenda-layer,
        .details-layer {
            position: relative;
            z-index: 3; /* above particles */
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 6px 0 12px; /* 0px sides */
            color: #fff;
            background: transparent !important; /* avoid any full-width color */
        }
        .panel-right .details-layer { align-items: stretch; justify-content: flex-start; padding: 18px 0 48px; }

        /* Agenda header */
        .agenda-header { text-align: center; background: transparent; padding: 0; border: 0; box-shadow: none; display: flex; flex-direction: column; align-items: center; height: 190px; margin: 0; }
        .conference-logo { width: 80px; height: 80px; margin: 0 auto 8px; display: block; object-fit: contain; max-width: 100%; }
        .event-title-section { color: white; margin: 4px 0 0; padding: 0; display: flex !important; flex-direction: column !important; align-items: center !important; text-align: center !important; width: 100%; }
        .event-title-section .event-title { order: 1 !important; }
        .event-title-section .event-day { order: 2 !important; }
        .event-title { display: block; font-family: 'Orbitron', sans-serif; font-size: 1.4em; font-weight: 700; line-height: 1.1; margin-bottom: 6px; letter-spacing: .5px; background: linear-gradient(90deg, #2CC0FF, #7DD3FF); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; color: transparent; text-shadow: 0 0 10px rgba(44,192,255,.3); text-align: center !important; }
        .event-day {
            display: block;
            margin-top: 2px;
            font-family: 'Inter', system-ui, sans-serif;
            font-size: .9em;
            color: #7DD3FF;
            opacity: .95;
            font-weight: 600;
            letter-spacing: .4px;
            text-align: center !important;
            position: static !important;
            float: none !important;
            transform: none !important;
            top: auto !important; left: auto !important; right: auto !important; bottom: auto !important;
            background: transparent !important;
            padding: 0 !important;
            border: 0 !important;
            box-shadow: none !important;
            text-shadow: none;
        }

        /* Cards container (flex column with 12px gap) */
        .upcoming-events { height: calc(100% - 190px); display: flex; flex-direction: column; gap: 12px; overflow: hidden; margin-top: 6px; }

        /* Card styles (match reference) */
        .upcoming-event { --neon: #2CC0FF; --neon-soft: rgba(44,192,255,0.7); --grid-x: rgba(44,192,255,0.10); --grid-y: rgba(44,192,255,0.07); position: relative; overflow: hidden; padding: 18px 16px; color: #fff; background: repeating-linear-gradient(90deg, var(--grid-x) 0 1px, transparent 1px 22px), repeating-linear-gradient(0deg, var(--grid-y) 0 1px, transparent 1px 22px), radial-gradient(2px 2px at 20% 30%, rgba(44,192,255,0.18), transparent 60%), radial-gradient(2px 2px at 70% 60%, rgba(44,192,255,0.18), transparent 60%); background-size: auto, auto, 100% 100%, 100% 100%; animation: gridDrift 18s linear infinite; clip-path: polygon(0 0, calc(100% - 28px) 0, 100% 28px, 100% 100%, 0 100%); border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: flex-start; gap: 4px; min-height: 120px; transition: transform .25s ease, filter .25s ease, min-height .25s ease, padding .25s ease; }
        .upcoming-event::before { content: ""; position: absolute; inset: 0; pointer-events: none; clip-path: polygon(0 0, calc(100% - 28px) 0, 100% 28px, 100% 100%, 0 100%); box-shadow: inset 0 0 0 2px var(--neon-soft), inset 0 0 0 4px rgba(44,192,255,0.25); }
        .upcoming-event::after { content: ""; position: absolute; pointer-events: none; width: 46px; height: 46px; top: 0; right: 0; background: radial-gradient(circle at 80% 20%, rgba(44,192,255,0.9), transparent 60%); clip-path: polygon(100% 0, 0 0, 100% 100%); filter: saturate(140%); animation: cornerPulse 2.6s ease-in-out infinite; }
        .upcoming-event .time { font-size: 1.1em; font-weight: 800; margin-bottom: 6px; background: linear-gradient(90deg, #2CC0FF, #7DD3FF, #2CC0FF); background-size: 200% 100%; -webkit-background-clip: text; background-clip: text; color: transparent; animation: neonText 6s linear infinite; text-shadow: 0 0 6px rgba(44,192,255,0.55); text-align: left; }
        .upcoming-event .time { font-size: calc(1.1em + 5px); }
        .upcoming-event .title { font-family: 'Inter', system-ui, sans-serif; color: #eaf6ff; font-size: calc(1.02em + 5px); line-height: 1.3; letter-spacing: .2px; white-space: normal; overflow: visible; text-overflow: clip; max-width: 100%; word-break: break-word; text-shadow: 0 0 6px rgba(12,120,200,0.25); text-align: left; font-weight: 700; }
        .upcoming-event .scan { position: absolute; inset: 0; background: linear-gradient(115deg, rgba(255,255,255,0.00) 0%, rgba(255,255,255,0.08) 40%, rgba(255,255,255,0.12) 50%, rgba(255,255,255,0.08) 60%, rgba(255,255,255,0.00) 100%); mix-blend-mode: screen; transform: translateX(-60%) skewX(-18deg); animation: scanSweep 6s linear infinite; pointer-events: none; }
        .preview-highlight .time { font-size: calc(1.24em + 5px) !important; letter-spacing: 0.6px; }
        .preview-highlight .title { font-size: calc(1.08em + 5px) !important; }
        .preview-highlight { min-height: 150px; transform: none !important; filter: saturate(1.24) brightness(1.06) !important; clip-path: polygon(0 0, calc(100% - 36px) 0, 100% 36px, 100% 100%, 0 100%); background: linear-gradient(135deg, rgba(11,211,255,0.09), rgba(11,134,255,0.06)) !important; }
        .preview-highlight::before { box-shadow: inset 0 0 0 2px rgba(44,192,255,0.35); animation: glowPulse 2.2s ease-in-out infinite; }
        .preview-highlight::after { display: none; }
        .preview-highlight .scan, .preview-highlight .trace, .preview-highlight .flux, .preview-highlight .stripes { opacity: 0 !important; }

        /* Animations */
        @keyframes scanSweep { 0% { transform: translateX(-60%) skewX(-18deg); } 100% { transform: translateX(140%) skewX(-18deg); } }
        @keyframes cornerPulse { 0%, 100% { opacity: 0.55; filter: drop-shadow(0 0 4px rgba(44,192,255,0.35)); } 50% { opacity: 0.9; filter: drop-shadow(0 0 8px rgba(44,192,255,0.6)); } }
        @keyframes gridDrift { 0% { background-position: 0 0, 0 0, 0 0, 0 0; } 100% { background-position: 120px 0, 0 120px, 0 0, 0 0; } }
        @keyframes neonText { 0% { background-position: 0% center; } 100% { background-position: 200% center; } }
        @keyframes glowPulse { 0%,100% { box-shadow: inset 0 0 0 2px rgba(44,192,255,0.30); } 50% { box-shadow: inset 0 0 0 3px rgba(124,218,255,0.55); } }

        /* Rotating circuit backgrounds scaled for 720x1080 */
        .panel-left::before, .panel-right::after { content: ""; position: absolute; pointer-events: none; transform-origin: 50% 50%; z-index: 1; opacity: .55; }
        .panel-left::before { left: calc(360px - var(--rotor1-size)); bottom: -60px; width: var(--rotor1-size); height: var(--rotor1-size); background-image: url("circuits circles 2_1.png"); background-repeat: no-repeat; background-position: left bottom; background-size: cover; animation: rotateSlow var(--rotor1-duration) linear infinite; }
        .panel-right::after { top: -80px; right: -80px; width: var(--rotor2-size); height: var(--rotor2-size); background-image: url("circuits circles 1_1.png"); background-repeat: no-repeat; background-position: right top; background-size: cover; animation: rotateSlow var(--rotor2-duration) linear infinite; }
        @keyframes rotateSlow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* 3D spinning logo */
        .logo-3d-wrapper { perspective: 850px; perspective-origin: 50% 50%; width: 120px; height: 120px; margin: 0 auto 14px; overflow: visible; position: relative; }
        .logo-3d-wrapper.small { --logo-size: 90px; width: 90px; height: 90px; margin: 8px auto 10px; }
        .logo-3d-wrapper { --logo-size: 120px; }
        .logo-stack { position: relative; width: var(--logo-size); height: var(--logo-size); transform-style: preserve-3d; animation: spinSlow3D 24s linear infinite; will-change: transform; --slices: 32; --depthStep: 0.6px; z-index: 1; }
        @keyframes spinSlow3D { 0% { transform: rotateX(16deg) rotateY(0deg) rotateZ(0.4deg); } 50% { transform: rotateX(16deg) rotateY(180deg) rotateZ(0.4deg); } 100% { transform: rotateX(16deg) rotateY(360deg) rotateZ(0.4deg); } }
        .logo-stack .slice { position: absolute; inset: 0; background: url('nitc-logo.png') center/contain no-repeat; transform: translateZ(calc((var(--i) - ((var(--slices) - 1) / 2)) * var(--depthStep))); backface-visibility: visible; }
        .logo-stack .slice::after { content: ""; position: absolute; inset: 0; background: inherit; transform: rotateY(180deg); backface-visibility: hidden; }
        .logo-stack::before { content: none; }
        .logo-billboard { display: none !important; }

        /* IDs expected by existing scripts */
        #agendaList { flex: 1; overflow: hidden; }
        #currentDetail { flex: 1; overflow: hidden; }

        /* Screen 2 waiting message */
        .wait-wrap { width: 100%; max-width: 100%; padding: 0 16px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; }
        .typing-title { margin-top: 20px; font-weight: 800; letter-spacing: .4px; background: linear-gradient(90deg, #2CC0FF, #7DD3FF, #2CC0FF); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 12px rgba(44,192,255,0.35); white-space: normal; word-break: normal; overflow-wrap: normal; max-width: calc(100% - 20px); padding: 0 10px; text-align: center; font-size: clamp(1.0em, 2.4vw, 1.15em); border: none !important; outline: none !important; box-shadow: none !important; animation: glowPulse 2.2s ease-in-out infinite; position: static; display: inline; text-decoration: none !important; }
        .typing-title::before, .typing-title::after { content: none !important; display: none !important; }
        .wait-sub { margin-top: 8px; color: rgba(234,246,255,0.9); font-size: .85em; text-align: center; text-shadow: 0 0 8px rgba(44,192,255,0.25); white-space: normal; line-height: 1.35; word-wrap: break-word; overflow-wrap: anywhere; max-width: calc(100% - 20px); padding: 0 10px; }

        /* Screen 2 description */
        .event-content { width: 100%; min-height: 100%; display: flex; flex-direction: column; }
        .center-pack { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 16px; }
        .current-description { font-size: calc(1.18em + 5px); line-height: 1.5; color: #eaf6ff; text-align: center; padding: 12px 14px; word-break: keep-all; overflow-wrap: normal; hyphens: none; position: relative; background: linear-gradient(135deg, rgba(11,211,255,0.10), rgba(11,134,255,0.08)); border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); margin: 8px 12px; }
        .current-description::before { content: ""; position: absolute; inset: 0; pointer-events: none; border-radius: 12px; box-shadow: inset 0 0 0 2px rgba(44,192,255,0.35); }
        .mid-wrap { flex: 1; display: flex; align-items: center; justify-content: center; }

        /* Livestream placeholder */
        .stream-box { height: 300px; width: calc(100% - 24px); margin: 0 12px; border-radius: 10px; border: 1px solid rgba(124,218,255,0.22); background: linear-gradient(135deg, rgba(9,60,96,0.16), rgba(8,32,60,0.10)); box-shadow: inset 0 0 0 1px rgba(44,192,255,0.12), inset 0 0 24px rgba(44,192,255,0.10); display: none; }
        .preview-header { margin-bottom: 16px; text-align: center; }
        .nitc-logo { width: 100px; height: 100px; margin: 0 auto 12px; display: block; object-fit: contain; max-width: 100%; height: auto; }
        .conference-title { font-family: 'Orbitron', sans-serif; font-size: 2em; font-weight: 700; margin-bottom: 8px; letter-spacing: .5px; background: linear-gradient(90deg, #2CC0FF, #7DD3FF); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; color: transparent; text-shadow: 0 0 10px rgba(44,192,255,.3); }
        .conference-subtitle { font-family: 'Inter', system-ui, sans-serif; font-size: 0.9em; line-height: 1.3; opacity: 0.95; }
        .qr-section { margin-top: 16px; margin-bottom: 12px; text-align: center; }
        .qr-title { font-size: 1.2em; font-weight: 700; margin-bottom: 10px; }
        .qr-container { background: transparent; padding: 12px; border-radius: 12px; display: inline-block; box-shadow: none; position: relative; backdrop-filter: blur(6px); }
        .qr-container::before { content: ""; position: absolute; inset: 0; pointer-events: none; border-radius: 12px; box-shadow: inset 0 0 0 2px rgba(44,192,255,0.35); }
        /* Carousel styles (like LED reference) */
        .carousel-section { width: 100%; margin-top: 18px; margin-bottom: 36px; }
        .carousel-container { width: 100%; height: 150px; overflow: hidden; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.4); }
        .carousel-track { display: flex; width: 500%; height: 100%; animation: slideShow 20s infinite; }
        .carousel-slide { width: 20%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; }
        .carousel-slide img { width: 100%; height: 100%; object-fit: cover; display: block; }
        @keyframes slideShow { 0%,18%{ transform: translateX(0%);} 20%,38%{ transform: translateX(-20%);} 40%,58%{ transform: translateX(-40%);} 60%,78%{ transform: translateX(-60%);} 80%,98%{ transform: translateX(-80%);} 100%{ transform: translateX(0%);} }
        .info-note { margin-top: 28px; font-size: .9em; opacity: .95; }
        /* Screen 2 persistent layout container */
        .preview-container { display: flex; flex-direction: column; align-items: center; width: 100%; height: 100%; text-align: center; gap: 16px; padding: 0 12px; }
        .preview-container .center-pack { flex: 1 1 auto; display: flex; align-items: center; justify-content: center; width: 100%; }
        .preview-container .mid-wrap { flex: 0 0 auto; width: 100%; display: flex; align-items: center; justify-content: center; }
        .panel-right #currentDetail { display: none; }
    </style>
</head>
<body>
    <!-- Global clock (kept); LIVE indicator will be inside Screen 1 -->
    <div class="clock" id="currentClock">00:00:00</div>

    <!-- Folded layout (left = Screen 1, right = Screen 2) -->
    <div class="folded-container">
        <!-- Left Panel: Screen 1 (Agenda List) -->
        <div class="panel-left" id="screen1">
            <div id="tsparticles-left"></div>
            <div class="status-indicator">● LIVE</div>
            <div class="agenda-layer">
                <div id="agendaList" class="agenda-list"></div>
            </div>
        </div>

        <!-- Right Panel: Screen 2 (Current Detail / Conference Content) -->
        <div class="panel-right" id="screen2">
            <div id="tsparticles-right"></div>
            <div class="details-layer">
                <div class="preview-container">
                    <div class="preview-header">
                        <img class="nitc-logo" src="NITC.gif" alt="NITC Logo" />
                        <h1 class="conference-title">NITC 2025</h1>
                        <p class="conference-subtitle">Fostering a Human Centric Nation<br>Towards Society 5.0</p>
                    </div>

                    <div class="center-pack">
                        <div class="mid-wrap">
                            <div class="current-description">Event starts soon</div>
                        </div>
                    </div>

                    <div class="carousel-section">
                        <div class="carousel-container">
                            <div class="carousel-track">
                                <div class="carousel-slide">
                                    <img src="carousel 1.jpg" alt="Slide 1" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 2.jpg" alt="Slide 2" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 3.jpg" alt="Slide 3" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 4.jpg" alt="Slide 4" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 5.jpg" alt="Slide 5" />
                                </div>
                            </div>
                        </div>
                        <div class="info-note">Visit https://nitc.lk for more info</div>
                    </div>
                </div>
                <div id="currentDetail" class="current-detail"></div>
            </div>
        </div>
    </div>

    <!-- Existing app scripts (both screens active on one page) -->
    <script src="model.js"></script>
    <script src="view.js"></script>
    <script src="controller.js"></script>
    <script src="app-display1.js"></script>
    <script src="qrcode.min.js"></script>
    <script>
      (function autoSyncDescription(){
        function getHighlightedTitle(){
          const el = document.querySelector('.upcoming-event.preview-highlight .title');
          return el ? el.textContent.trim() : null;
        }
        function update(){
          try {
            const desc = document.querySelector('.panel-right .current-description');
            if (!desc) return;
            const t = getHighlightedTitle();
            desc.textContent = t || 'Event starts soon';
          } catch(e) {}
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => {
            update();
            setInterval(update, 1000);
          });
        } else {
          update();
          setInterval(update, 1000);
        }
      })();
      (function initLocalQR(){
        function make(){
          try{
            var target = document.querySelector('.panel-right .qr-code');
            if (!target || !window.QRCode) return;
            target.innerHTML = '';
            var q = new QRCode(target, { width: 120, height: 120, colorDark: '#000000', colorLight: '#ffffff' });
            q.makeCode('https://nitc.lk');
          }catch(e){}
        }
        if (document.readyState === 'loading'){
          document.addEventListener('DOMContentLoaded', make);
        } else { make(); }
      })();
      (function exactTimeHighlighter(){
        function parseMinutes(t){
          if (!t) return null;
          var m=t.trim().match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i); if(!m) return null;
          var hh=parseInt(m[1],10), mm=parseInt(m[2],10), ap=m[3].toUpperCase();
          if(ap==='PM' && hh<12) hh+=12; if(ap==='AM' && hh===12) hh=0; return hh*60+mm;
        }
        function nowMinutes(){ var d=new Date(); return d.getHours()*60 + d.getMinutes(); }
        function update(){
          try{
            const items=[...document.querySelectorAll('.upcoming-event')];
            if(!items.length) return;
            const times=items.map(el=>parseMinutes(el.querySelector('.time')?.textContent||''));
            const now=nowMinutes();
            let idx=-1;
            for(let i=0;i<times.length;i++){ if(times[i]!=null && times[i] <= now) idx=i; }
            if(idx===-1){ idx = times.findIndex(v=>v!=null); }
            items.forEach(el=>el.classList.remove('preview-highlight'));
            if(items[idx]) items[idx].classList.add('preview-highlight');
          }catch(e){}
        }
        if (document.readyState==='loading'){
          document.addEventListener('DOMContentLoaded', ()=>{ update(); setInterval(update, 30000); });
        } else { update(); setInterval(update, 30000); }
      })();
    </script>
    <script>
      // Initialize right panel particles on combined page
      (function initRightParticles(){
        function start(){
          if (typeof tsParticles === 'undefined') return;
          const cfg = {
            particles: {
              color: { value: '#ffffff' },
              links: { color: '#ffffff', opacity: 0.3, width: 1, distance: 120 },
              number: { value: 70 },
              opacity: { value: 0.4, random: { enable: true, minimumValue: 0.1 } },
              size: { value: 2, random: { enable: true, minimumValue: 1 } },
              move: { enable: true, speed: 0.2, direction: 'none', random: true, straight: false, outModes: { default: 'bounce' } }
            },
            background: { color: { value: 'transparent' } },
            interactivity: {
              events: { onHover: { enable: true, mode: 'grab' }, onClick: { enable: false } },
              modes: { grab: { distance: 120, links: { opacity: 0.6 } } }
            },
            detectRetina: true,
            fpsLimit: 30
          };
          tsParticles.load('tsparticles-right', cfg).catch(()=>{});
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => setTimeout(start, 800));
        } else {
          setTimeout(start, 800);
        }
      })();

      // Attempt to load external agenda with exact titles/descriptions
      (function loadExternalAgenda(){
        async function run(){
          try {
            const res = await fetch('agenda.json', { cache: 'no-store' });
            if (!res.ok) return;
            const data = await res.json();
            if (window.conferenceApp && window.conferenceApp.model && typeof window.conferenceApp.model.applyExternalAgenda === 'function') {
              window.conferenceApp.model.applyExternalAgenda(data);
              console.log('External agenda loaded from agenda.json');
              // Force refresh
              setTimeout(()=>window.conferenceApp.controller?.updateDisplay?.(), 100);
            }
          } catch(e) {
            console.log('No external agenda.json found; using built-in agenda');
          }
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', run);
        } else {
          run();
        }
      })();
    </script>
</body>
</html>
