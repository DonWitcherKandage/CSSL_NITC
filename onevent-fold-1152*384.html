<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NITC 2025 - On-Event Fold Display</title>

    <!-- Particles (same lib used elsewhere) -->
    <script src="https://unpkg.com/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>

    <!-- Base styles if needed by components -->
    <link rel="stylesheet" href="styles.css" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Inter:wght@600;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; border-radius: 0 !important; }

        /* Match exact size as the folded LED display reference */
        html, body {
            width: 768px;
            height: 1152px;
            overflow: hidden;
        }
        html { background: radial-gradient(120% 120% at 50% 0%, #050d1c 0%, #030a17 45%, #010409 100%) !important; background-attachment: fixed; background-repeat: no-repeat; }
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: radial-gradient(120% 120% at 50% 0%, #050d1c 0%, #030a17 45%, #010409 100%) !important;
            background-attachment: fixed; background-repeat: no-repeat;
            overflow: hidden; /* no scrolls */
            width: 768px; /* total fold width */
            height: 1152px; /* total fold height */
        }

        .folded-container {
            display: flex;
            width: 768px;
            height: 1152px;
            position: relative;
            /* no container background; panels carry their own */
            /* rotor variables like reference */
            --rotor1-size: 660px;
            --rotor2-size: 280px;
            --rotor1-duration: 40s;
            --rotor2-duration: 120s;
        }

        .panel-left, .panel-right {
            width: 384px;
            height: 1152px;
            background: linear-gradient(180deg, #051022 0%, #0a2a4d 50%, #020a12 100%);
            position: relative;
            overflow: hidden;
            border: 0; box-shadow: none; outline: none;
            transform: translateZ(0);
        }
        /* no overlap needed with restored backgrounds */

        #tsparticles-left, #tsparticles-right {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0; /* behind content */
            display: block !important; /* show particles */
        }
        /* Ensure particles canvas is transparent over gradient */
        #tsparticles-left canvas, #tsparticles-right canvas, .tsparticles-canvas-el { background: transparent !important; display: block !important; }

        /* Live indicator and clock, positioned like the reference */
        /* Status indicator style (scoped to left panel to avoid conflicts) */
        .panel-left .status-indicator {
            position: absolute;
            top: 8px; right: 8px;
            padding: 4px 10px;
            background: #e67e22 !important;
            color: #fff !important;
            border-radius: 12px !important;
            font-weight: bold !important;
            font-size: 0.7em !important;
            animation: blink 1.5s infinite;
            z-index: 1002;
        }
        .clock {
            position: absolute;
            top: 8px; left: 8px;
            padding: 4px 10px;
            background: rgba(0,0,0,0.5);
            color: #fff;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.75em;
            z-index: 1001;
        }

        /* Hide LIVE chip and clock on Screen 1 */
        .panel-left .status-indicator,
        .clock { display: none !important; }

        
        @keyframes blink { 0%,50%{opacity:1} 51%,100%{opacity:.3} }

        /* Content layers */
        .agenda-layer,
        .details-layer {
            position: relative;
            z-index: 3; /* above particles */
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 6px 0 12px; /* 0px sides */
            color: #fff;
            background: transparent !important; /* avoid any full-width color */
        }
        .panel-right .details-layer { align-items: stretch; justify-content: flex-start; padding: 20px 0; }


        /* Agenda header (logo + title + day) */
        .agenda-header { text-align: center; background: transparent; padding: 0; border: 0; box-shadow: none; display: flex; flex-direction: column; align-items: center; height: 190px; margin: 0; }
        .conference-logo { width: 80px; height: 80px; margin: 0 auto 8px; display: block; object-fit: contain; max-width: 100%; }
        .event-title-section { color: white; margin: 4px 0 0; padding: 0; display: flex !important; flex-direction: column !important; align-items: center !important; text-align: center !important; width: 100%; }
        .event-title-section .event-title { order: 1 !important; }
        .event-title-section .event-day { order: 2 !important; }
        .event-title { display: block; font-family: 'Orbitron', sans-serif; font-size: 1.4em; font-weight: 700; line-height: 1.1; margin-bottom: 6px; letter-spacing: .5px; background: linear-gradient(90deg, #2CC0FF, #7DD3FF); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; color: transparent; text-shadow: 0 0 10px rgba(44,192,255,.3); text-align: center !important; }
        .event-day {
            display: block;
            margin-top: 2px;
            font-family: 'Inter', system-ui, sans-serif;
            font-size: .9em;
            color: #7DD3FF;
            opacity: .95;
            font-weight: 600;
            letter-spacing: .4px;
            text-align: center !important;
            /* neutralize any external pill/positioning */
            position: static !important;
            float: none !important;
            transform: none !important;
            top: auto !important; left: auto !important; right: auto !important; bottom: auto !important;
            background: transparent !important;
            padding: 0 !important;
            border: 0 !important;
            box-shadow: none !important;
            text-shadow: none;
        }

        
        /* Countdown styles (ported from 720x1080) */
        .countdown-section { margin: 20px 0; width: 100%; display: flex; flex-direction: column; align-items: center; }
        .countdown-title { font-size: 1.3em; font-weight: bold; margin-bottom: 12px; letter-spacing: 0.5px; }
        .countdown-display { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-width: 300px; margin: 0 auto; }
        .countdown-item { position: relative; overflow: hidden; padding: 14px 10px; border-radius: 8px; background: linear-gradient(135deg, rgba(11,211,255,0.10), rgba(11,134,255,0.08)); box-shadow: 0 4px 12px rgba(0,0,0,0.15); text-align: center; transition: all 0.3s ease; backdrop-filter: blur(5px); }
        .countdown-item::before { content: ""; position: absolute; inset: 0; pointer-events: none; border-radius: 12px; box-shadow: inset 0 0 0 2px rgba(44,192,255,0.35); }
        .countdown-item::after { content: ""; position: absolute; left: 0; right: 0; height: 2px; top: 8px; pointer-events: none; background: linear-gradient(90deg, rgba(44,192,255,0) 0%, rgba(124,218,255,0.9) 50%, rgba(44,192,255,0) 100%); animation: edgeSweepX 2s linear infinite; mix-blend-mode: screen; }
        .countdown-number { font-size: 2em; font-weight: bold; display: block; line-height: 1; color: #fff; text-shadow: 0 0 10px rgba(44,192,255,0.6); }
        .countdown-label { font-size: 0.75em; font-weight: 600; text-transform: uppercase; margin-top: 5px; color: rgba(255,255,255,0.8); }
        @keyframes edgeSweepX { 0% { background-position: -200% 0; opacity: .7; } 50% { opacity: 1; } 100% { background-position: 200% 0; opacity: .7; } }

        /* Agenda cards container (match reference: flex column with 12px gap) */
        .upcoming-events { height: calc(100% - 190px); display: flex; flex-direction: column; gap: 16px; overflow: hidden; margin-top: 16px; }

        /* Card styles (match reference) */
        .upcoming-event { --neon: #2CC0FF; --neon-soft: rgba(44,192,255,0.7); --grid-x: rgba(44,192,255,0.10); --grid-y: rgba(44,192,255,0.07); position: relative; overflow: hidden; padding: 18px 16px; color: #fff; background: repeating-linear-gradient(90deg, var(--grid-x) 0 1px, transparent 1px 22px), repeating-linear-gradient(0deg, var(--grid-y) 0 1px, transparent 1px 22px), radial-gradient(2px 2px at 20% 30%, rgba(44,192,255,0.18), transparent 60%), radial-gradient(2px 2px at 70% 60%, rgba(44,192,255,0.18), transparent 60%); background-size: auto, auto, 100% 100%, 100% 100%; animation: gridDrift 18s linear infinite; clip-path: polygon(0 0, calc(100% - 28px) 0, 100% 28px, 100% 100%, 0 100%); border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: flex-start; gap: 4px; min-height: 120px; transition: transform .25s ease, filter .25s ease, min-height .25s ease, padding .25s ease; }
        .upcoming-event::before { content: ""; position: absolute; inset: 0; pointer-events: none; clip-path: polygon(0 0, calc(100% - 28px) 0, 100% 28px, 100% 100%, 0 100%); box-shadow: inset 0 0 0 2px var(--neon-soft), inset 0 0 0 4px rgba(44,192,255,0.25); }
        /* corner wedge */
        .upcoming-event::after { content: ""; position: absolute; pointer-events: none; width: 46px; height: 46px; top: 0; right: 0; background: radial-gradient(circle at 80% 20%, rgba(44,192,255,0.9), transparent 60%); clip-path: polygon(100% 0, 0 0, 100% 100%); filter: saturate(140%); animation: cornerPulse 2.6s ease-in-out infinite; }
        .upcoming-event .time { font-size: 1.1em; font-weight: 800; margin-bottom: 6px; background: linear-gradient(90deg, #2CC0FF, #7DD3FF, #2CC0FF); background-size: 200% 100%; -webkit-background-clip: text; background-clip: text; color: transparent; animation: neonText 6s linear infinite; text-shadow: 0 0 6px rgba(44,192,255,0.55); text-align: left; }
        .upcoming-event .time { font-size: calc(1.1em + 5px); }
        .upcoming-event .title {
            font-family: 'Inter', system-ui, sans-serif;
            color: #eaf6ff;
            font-size: calc(1.02em + 5px);
            line-height: 1.3;
            letter-spacing: .2px;
            white-space: normal; /* allow wrapping */
            overflow: visible;   /* no clipping */
            text-overflow: clip; /* no ellipsis */
            max-width: 100%;
            word-break: break-word; /* wrap long words */
            text-shadow: 0 0 6px rgba(12,120,200,0.25);
            text-align: left;
            font-weight: 700;
        }
        /* diagonal scan overlay */
        .upcoming-event .scan { position: absolute; inset: 0; background: linear-gradient(115deg, rgba(255,255,255,0.00) 0%, rgba(255,255,255,0.08) 40%, rgba(255,255,255,0.12) 50%, rgba(255,255,255,0.08) 60%, rgba(255,255,255,0.00) 100%); mix-blend-mode: screen; transform: translateX(-60%) skewX(-18deg); animation: scanSweep 6s linear infinite; pointer-events: none; }
        /* Larger fonts on highlight (match reference) */
        .preview-highlight .time { font-size: calc(1.24em + 5px) !important; letter-spacing: 0.6px; }
        .preview-highlight .title { font-size: calc(1.08em + 5px) !important; }

        /* Highlight current card (exact reference) */
        .preview-highlight { min-height: 150px; transform: none !important; filter: saturate(1.24) brightness(1.06) !important; clip-path: polygon(0 0, calc(100% - 36px) 0, 100% 36px, 100% 100%, 0 100%); background: linear-gradient(135deg, rgba(11,211,255,0.09), rgba(11,134,255,0.06)) !important; }
        .preview-highlight::before { box-shadow: inset 0 0 0 2px rgba(44,192,255,0.35); animation: glowPulse 2.2s ease-in-out infinite; }
        .preview-highlight::after { display: none; }
        .preview-highlight .scan, .preview-highlight .trace, .preview-highlight .flux, .preview-highlight .stripes { opacity: 0 !important; }

        /* NEON WIRES overlay */
        .upcoming-event .wires { position: absolute; inset: 0; pointer-events: none; opacity: 0; background-image: linear-gradient(60deg, rgba(44,192,255,0) 0%, rgba(44,192,255,0.9) 50%, rgba(44,192,255,0) 100%), linear-gradient(120deg, rgba(125,211,255,0) 0%, rgba(125,211,255,0.85) 50%, rgba(125,211,255,0) 100%), linear-gradient(45deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.35) 50%, rgba(255,255,255,0) 100%), linear-gradient(30deg, rgba(44,192,255,0) 0%, rgba(44,192,255,0.6) 50%, rgba(44,192,255,0) 100%), linear-gradient(75deg, rgba(125,211,255,0) 0%, rgba(125,211,255,0.55) 50%, rgba(125,211,255,0) 100%); background-size: 200% 2px, 200% 2px, 200% 1px, 200% 2px, 200% 2px; background-repeat: no-repeat; background-position: -200% 25%, 200% 50%, -200% 75%, -200% 35%, 200% 65%; animation: wiresMove 1.6s linear infinite; filter: drop-shadow(0 0 8px rgba(124,218,255,0.8)); }
        .preview-highlight .wires { opacity: 0 !important; animation: none !important; }
        .preview-highlight .orbit { display: none !important; }

        /* EDGE SWEEP bars */
        .upcoming-event .edges { position: absolute; inset: 0; pointer-events: none; opacity: 0; }
        .preview-highlight .edges { opacity: 1; }
        .upcoming-event .edges::before, .upcoming-event .edges::after { content: ""; position: absolute; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, rgba(44,192,255,0) 0%, rgba(124,218,255,0.9) 50%, rgba(44,192,255,0) 100%); animation: edgeSweepX 1.6s linear infinite; mix-blend-mode: screen; }
        .upcoming-event .edges::before { top: 6px; }
        .upcoming-event .edges::after { bottom: 6px; animation-delay: .8s; }

        /* NEON RAIN */
        .upcoming-event .flux { position: absolute; inset: 0; pointer-events: none; opacity: 0; background-image: repeating-linear-gradient(to bottom, rgba(44,192,255,0.0) 0px, rgba(44,192,255,0.12) 12px, rgba(44,192,255,0.0) 24px); background-size: 100% 24px; mix-blend-mode: screen; }
        .preview-highlight .flux { opacity: 1; animation: neonRain 2.4s linear infinite; }

        /* BORDER RUNNERS */
        .upcoming-event .trace { position: absolute; inset: 0; pointer-events: none; opacity: 0; }
        .upcoming-event .trace::before { content: ""; position: absolute; top: 0; left: 0; height: 2px; width: 200%; background: linear-gradient(90deg, transparent 0%, rgba(44,192,255,0.0) 30%, rgba(44,192,255,1) 50%, rgba(44,192,255,0.0) 70%, transparent 100%); animation: runnerX 1.8s linear infinite; }
        .upcoming-event .trace::after { content: ""; position: absolute; top: 0; right: 0; width: 2px; height: 200%; background: linear-gradient(180deg, transparent 0%, rgba(44,192,255,0.0) 30%, rgba(44,192,255,1) 50%, rgba(44,192,255,0.0) 70%, transparent 100%); animation: runnerY 1.8s linear infinite; }
        .preview-highlight .trace { opacity: 1; }

        /* HALO rings */
        .upcoming-event .halo { position: absolute; inset: 0; pointer-events: none; opacity: 0; clip-path: polygon(0 0, calc(100% - 36px) 0, 100% 36px, 100% 100%, 0 100%); background: conic-gradient(#0B86FF, #2CC0FF, #7DD3FF, #2CC0FF, #0B86FF); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask-composite: exclude; padding: 3px; border-radius: 12px; animation: haloPulse 1.8s ease-in-out infinite; box-shadow: 0 0 18px rgba(44,192,255,0.45), 0 0 28px rgba(124,218,255,0.35); }
        .preview-highlight .halo { opacity: 1; }
        .upcoming-event .halo2 { position: absolute; inset: 0; pointer-events: none; opacity: 0; clip-path: polygon(0 0, calc(100% - 36px) 0, 100% 36px, 100% 100%, 0 100%); background: conic-gradient(#7DD3FF, #2CC0FF, #0B86FF, #2CC0FF, #7DD3FF); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask-composite: exclude; padding: 3px; border-radius: 12px; animation: haloPulse 2.4s ease-in-out infinite reverse; box-shadow: 0 0 12px rgba(124,218,255,0.35); }
        .preview-highlight .halo2 { opacity: 1; }

        /* RIPPLE dots */
        .upcoming-event .ripples { position: absolute; inset: 0; pointer-events: none; opacity: 0; }
        .preview-highlight .ripples { opacity: 1; }
        .upcoming-event .ripples::before, .upcoming-event .ripples::after { content: ""; position: absolute; width: 14px; height: 14px; border-radius: 50%; background: radial-gradient(circle, rgba(124,218,255,0.95) 0%, rgba(124,218,255,0.6) 40%, rgba(124,218,255,0) 70%); animation: rippleOut 1.8s ease-out infinite; }
        .upcoming-event .ripples::before { top: 12px; right: 12px; }
        .upcoming-event .ripples::after { bottom: 12px; left: 12px; animation-delay: .9s; }

        /* Orbit accent dot */
        .upcoming-event .orbit { position: absolute; top: 10px; left: -24px; width: 8px; height: 8px; border-radius: 50%; background: radial-gradient(circle, #7DD3FF 0%, #2CC0FF 60%, rgba(44,192,255,0.0) 70%); box-shadow: 0 0 10px rgba(44,192,255,0.8), 0 0 18px rgba(125,211,255,0.6); animation: orbitSlide 4.5s linear infinite; pointer-events: none; }

        /* Animations matching reference */
        @keyframes scanSweep { 0% { transform: translateX(-60%) skewX(-18deg); } 100% { transform: translateX(140%) skewX(-18deg); } }
        @keyframes cornerPulse { 0%, 100% { opacity: 0.55; filter: drop-shadow(0 0 4px rgba(44,192,255,0.35)); } 50% { opacity: 0.9; filter: drop-shadow(0 0 8px rgba(44,192,255,0.6)); } }
        @keyframes wiresMove { 0% { background-position: -200% 25%, 200% 50%, -200% 75%, -200% 35%, 200% 65%; } 50% { background-position: -20% 25%, 20% 50%, -20% 75%, -20% 35%; } 100% { background-position: 200% 25%, -200% 50%, 200% 75%, 200% 35%; }
        }
        @keyframes neonRain { 0% { background-position-y: 0; } 100% { background-position-y: 120px; } }
        @keyframes runnerX { 0% { transform: translateX(-50%); } 100% { transform: translateX(0%); } }
        @keyframes runnerY { 0% { transform: translateY(-50%); } 100% { transform: translateY(0%); } }
        @keyframes rippleOut { 0% { transform: scale(0.6); opacity: 0.9; } 70% { transform: scale(3.2); opacity: 0.15; } 100% { transform: scale(3.8); opacity: 0; } }
        @keyframes orbitSlide { 0% { transform: translateX(0); opacity: 0.9; } 80% { opacity: 0.9; } 100% { transform: translateX(calc(100% + 48px)); opacity: 0; } }

        @keyframes gridDrift { 0% { background-position: 0 0, 0 0, 0 0, 0 0; } 100% { background-position: 120px 0, 0 120px, 0 0, 0 0; } }
        @keyframes neonText { 0% { background-position: 0% center; } 100% { background-position: 200% center; } }
        @keyframes glowPulse { 0%,100% { box-shadow: inset 0 0 0 2px rgba(44,192,255,0.30); } 50% { box-shadow: inset 0 0 0 3px rgba(124,218,255,0.55); } }

        /* Rotating circuit backgrounds like reference */
        .panel-left::before,
        .panel-right::after {
            content: "";
            position: absolute;
            pointer-events: none;
            transform-origin: 50% 50%;
            z-index: 1;
            opacity: 0.55;
        }
        .panel-left::before {
            left: calc(384px - var(--rotor1-size));
            bottom: -40px;
            width: var(--rotor1-size);
            height: var(--rotor1-size);
            background-image: url("circuits circles 2_1.png");
            background-repeat: no-repeat;
            background-position: left bottom;
            background-size: cover;
            animation: rotateSlow var(--rotor1-duration) linear infinite;
        }
        .panel-right::after {
            top: -80px;
            right: -80px;
            width: var(--rotor2-size);
            height: var(--rotor2-size);
            background-image: url("circuits circles 1_1.png");
            background-repeat: no-repeat;
            background-position: right top;
            background-size: cover;
            animation: rotateSlow var(--rotor2-duration) linear infinite;
        }
        @keyframes rotateSlow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* 3D spinning logo (ported from reference) */
        .logo-3d-wrapper {
            perspective: 850px;
            perspective-origin: 50% 50%;
            width: 120px; height: 120px;
            margin: 0 auto 14px;
            overflow: visible;
            position: relative;
        }
        .logo-3d-wrapper.small { --logo-size: 90px; width: 90px; height: 90px; margin: 8px auto 10px; }
        .logo-3d-wrapper { --logo-size: 120px; }
        .logo-stack {
            position: relative;
            width: var(--logo-size);
            height: var(--logo-size);
            transform-style: preserve-3d;
            animation: spinSlow3D 24s linear infinite;
            will-change: transform;
            --slices: 32;
            --depthStep: 0.6px;
            z-index: 1;
        }
        @keyframes spinSlow3D {
            0%   { transform: rotateX(16deg) rotateY(0deg)   rotateZ(0.4deg); }
            50%  { transform: rotateX(16deg) rotateY(180deg) rotateZ(0.4deg); }
            100% { transform: rotateX(16deg) rotateY(360deg) rotateZ(0.4deg); }
        }
        .logo-stack .slice {
            position: absolute; inset: 0;
            background: url('nitc-logo.png') center/contain no-repeat;
            transform: translateZ(calc((var(--i) - ((var(--slices) - 1) / 2)) * var(--depthStep)));
            backface-visibility: visible;
        }
        /* mirrored back so logo reads correctly at back */
        .logo-stack .slice::after {
            content: "";
            position: absolute; inset: 0;
            background: inherit;
            transform: rotateY(180deg);
            backface-visibility: hidden;
        }
        .logo-stack::before { content: none; }
        .logo-billboard { display: none !important; }

        /* IDs expected by existing scripts */
        #agendaList { flex: 1; overflow: hidden; background: transparent !important; }
        #currentDetail { flex: 1; overflow: hidden; background: transparent !important; }
        .preview-container { position: relative; z-index: 3; padding: 160px 12px 20px; text-align: center; color: white; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; gap: 0; }
        .preview-container .center-pack { flex: 1; display: flex; align-items: center; justify-content: center; width: 100%; }
        .preview-container .mid-wrap { display: block; }
        .panel-right #currentDetail { display: none; }

        /* Safety for any images/content */
        img { max-width: 100%; height: auto; }
        /* Force all inner wrappers transparent to prevent any blue bar (except the gradient text title) */
        .agenda-list, .current-detail, .event-content, .center-pack, .wait-wrap, .wait-sub { background: transparent !important; }
        /* Hide any header injected into the list by external view renderer */
        #agendaList .agenda-header { display: none !important; }
        /* Ensure no accidental bottom band */
        .folded-container::after { content: none; }

        /* Screen 2 waiting message enhancements */
        .wait-wrap { width: 100%; max-width: 100%; padding: 0 16px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; }
        .typing-title {
            margin-top: 20px;
            font-weight: 800;
            letter-spacing: .4px;
            background: linear-gradient(90deg, #2CC0FF, #7DD3FF, #2CC0FF);
            -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 0 12px rgba(44,192,255,0.35);
            white-space: normal;
            word-break: normal;
            overflow-wrap: normal;
            max-width: 100%;
            padding: 0; /* 0px sides */
            text-align: center;
            font-size: clamp(1.0em, 2.4vw, 1.15em);
            border: none !important; /* no caret or box */
            outline: none !important;
            box-shadow: none !important;
            animation: glowPulse 2.2s ease-in-out infinite;
            position: static; /* remove pseudo underline positioning context */
            display: inline;  /* no container box feel */
            text-decoration: none !important; /* ensure no underline */
        }
        .typing-title::before, .typing-title::after { content: none !important; display: none !important; }
        .wait-sub {
            margin-top: 8px;
            color: rgba(234,246,255,0.9);
            font-size: .85em;
            text-align: center;
            text-shadow: 0 0 8px rgba(44,192,255,0.25);
            white-space: normal; /* wrap nicely on small widths */
            line-height: 1.35;
            word-wrap: break-word;
            overflow-wrap: anywhere;
            max-width: 100%;
            padding: 0; /* 0px sides */
        }
        .wait-block {
            position: relative;
            margin-top: 14px;
            width: 100%;
            max-width: 220px;
            height: 8px;
            border-radius: 6px;
            background: linear-gradient(90deg, rgba(44,192,255,0.15), rgba(125,211,255,0.25), rgba(44,192,255,0.15));
            box-shadow: 0 0 18px rgba(44,192,255,0.25), inset 0 0 6px rgba(44,192,255,0.35);
            overflow: hidden;
        }
        .wait-block::after {
            content: "";
            position: absolute; inset: 0;
            background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.7) 50%, rgba(255,255,255,0) 100%);
            transform: translateX(-100%);
            animation: sweep 1.8s linear infinite;
            mix-blend-mode: screen;
        }
        /* remove width-based typing to avoid edge truncation */
        @keyframes sweep { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* Screen 2 description styling (full text, compact) */
        .event-content { width: 100%; display: block; }
        .center-pack { display: block; }
        .current-description {
            font-size: calc(1.18em + 5px);
            line-height: 1.5;
            color: #eaf6ff;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 14px 16px;
            word-break: keep-all;      /* keep entire words on one line */
            overflow-wrap: normal;     /* do not force split */
            hyphens: none;             /* no hyphenation */
            position: relative;
            background: linear-gradient(135deg, rgba(11,211,255,0.10), rgba(11,134,255,0.08));
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            margin: 0 auto;
            max-width: 320px;
            min-height: 110px;
        }
        .current-description::before { content: ""; position: absolute; inset: 0; pointer-events: none; border-radius: 12px; box-shadow: inset 0 0 0 2px rgba(44,192,255,0.35); }
        .mid-wrap { display: block; }

        /* Subtle livestream placeholder box (reserve area) */
        .stream-box {
            /* clearly landscape: 16:9 responsive box */
            aspect-ratio: 16 / 9;
            width: 100%;
            margin: 0; /* 0px sides */
            border-radius: 10px;
            border: 1px solid rgba(124,218,255,0.22);
            background: linear-gradient(135deg, rgba(9,60,96,0.16), rgba(8,32,60,0.10));
            box-shadow: inset 0 0 0 1px rgba(44,192,255,0.12), inset 0 0 24px rgba(44,192,255,0.10);
            display: none;
        }
        .preview-header { margin-bottom: 0; text-align: center; position: absolute; top: 36px; left: 50%; transform: translateX(-50%); width: 100%; }
        .nitc-logo { width: 140px; height: 100px; margin: 0 auto 12px; display: block; object-fit: contain; max-width: 100%; height: auto; }
        .conference-title { font-family: 'Orbitron', sans-serif; font-size: 2em; font-weight: 700; margin-bottom: 8px; letter-spacing: .5px; background: linear-gradient(90deg, #2CC0FF, #7DD3FF); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; color: transparent; text-shadow: 0 0 10px rgba(44,192,255,.3); }
        .conference-subtitle { font-family: 'Inter', system-ui, sans-serif; font-size: 0.9em; line-height: 1.3; opacity: 0.95; }
        /* Carousel styles (like LED reference) */
        .carousel-section { width: 100%; margin-top: 0; margin-bottom: 20px; }
        .carousel-container { width: 100%; max-width: 320px; height: 150px; overflow: hidden; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.4); margin: 0 auto; }
        .carousel-track { display: flex; width: 500%; height: 100%; animation: slideShow 20s infinite; }
        .carousel-slide { width: 20%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; }
        .carousel-slide img { width: 100%; height: 100%; object-fit: cover; display: block; }
        @keyframes slideShow { 0%,18%{ transform: translateX(0%);} 20%,38%{ transform: translateX(-20%);} 40%,58%{ transform: translateX(-40%);} 60%,78%{ transform: translateX(-60%);} 80%,98%{ transform: translateX(-80%);} 100%{ transform: translateX(0%);} }
        .info-note { margin: 32px 0 180px; font-size: .9em; opacity: .95; }

        /* Disable hover effects on Screen 1 cards to match reference visuals exactly */
        .upcoming-event { cursor: default; }
        .upcoming-event:hover,
        .preview-highlight:hover {
            transform: none !important;
            filter: none !important;
        }
    </style>
</head>
<body>
    <!-- Global clock (kept); LIVE indicator will be inside Screen 1 -->
    <div class="clock" id="currentClock">00:00:00</div>

    <!-- Folded layout (left = Screen 1, right = Screen 2) -->
    <div class="folded-container">
        <!-- Left Panel: Screen 1 (Agenda List) -->
        <div class="panel-left" id="screen1">
          <div id="tsparticles-left"></div>
          <div class="status-indicator">● LIVE</div>
          <div class="agenda-layer">
                <div id="agendaHeader" class="agenda-header"></div>
                <div id="agendaList" class="agenda-list"></div>
          </div>
        </div>

        <!-- Right Panel: Screen 2 (Current Detail / Conference Content) -->
        <div class="panel-right" id="screen2">
            <div id="tsparticles-right"></div>
            <div class="details-layer">
                <div class="preview-container">
                    <div class="preview-header">
                        <img class="nitc-logo" src="NITC.gif" alt="NITC Logo" />
                        <h1 class="conference-title">NITC 2025</h1>
                        <p class="conference-subtitle">Fostering a Human Centric Nation<br>Towards Society 5.0</p>
                    </div>

                    <div class="center-pack">
                        <div class="mid-wrap">
                            <div class="current-description">Event starts soon</div>
                        </div>
                    </div>

                    <div class="carousel-section">
                        <div class="carousel-container">
                            <div class="carousel-track">
                                <div class="carousel-slide">
                                    <img src="carousel 1.jpg" alt="Slide 1" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 2.jpg" alt="Slide 2" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 3.jpg" alt="Slide 3" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 4.jpg" alt="Slide 4" />
                                </div>
                                <div class="carousel-slide">
                                    <img src="carousel 5.jpg" alt="Slide 5" />
                                </div>
                            </div>
                        </div>
                        <div class="info-note">Visit https://nitc.lk for more info</div>
                    </div>
                </div>
                <div id="currentDetail" class="current-detail"></div>
            </div>
        </div>
    </div>

    <!-- Existing app scripts (both screens active on one page) -->
    <script src="model.js"></script>
    <script>
      // Early guard to prevent external MVC from rendering into this page
      (function mvcGuard(){
        try {
          if (!window.conferenceApp) window.conferenceApp = {};
          if (!window.conferenceApp.view) window.conferenceApp.view = {};
          if (!window.conferenceApp.controller) window.conferenceApp.controller = {};
          window.conferenceApp.view.agendaList = null;
          window.conferenceApp.view.currentDetail = null;
          window.conferenceApp.view.renderAgendaList = function(){};
          window.conferenceApp.view.renderCurrentEvent = function(){};
          window.conferenceApp.controller.updateDisplay = function(){};
        } catch(e) {}
      })();
    </script>
    <script>
      (function earlyDayRender(){
        try{
          const model = new ConferenceModel();
          // Decide which day to show early
          let showDay = model.getCurrentDay() === 'Inauguration' ? 'Day 1' : model.getCurrentDay();
          // If current day already completed, preview next day
          try{
            const agenda = model.allAgendaData?.[model.getCurrentDay()] || [];
            if (agenda.length){
              const last = agenda[agenda.length-1];
              const endMin = model.timeToMinutes(last.time) + (last.duration || 0);
              const nowMin = model.timeToMinutes(model.getCurrentRealTime());
              if (nowMin >= endMin){
                const days = model.getAvailableDays();
                const idx = days.indexOf(model.getCurrentDay());
                const nextDay = days[idx+1];
                if (nextDay) showDay = nextDay;
              }
            }
          }catch(e){}

          const hdr = document.getElementById('agendaHeader');
          if (hdr){
            hdr.innerHTML = `
              <img src="NITC.gif" alt="NITC 2025 Logo" style="width:90px;height:90px;object-fit:contain;display:block;margin:8px auto 10px;" />
              <div class="event-title-section">
                <div class="event-title">EVENT<br>SCHEDULE</div>
                <div class="event-day">${showDay}</div>
              </div>`;
          }
          const list = document.getElementById('agendaList');
          if (list){
            const items = (model.allAgendaData?.[showDay] || []);
            list.innerHTML='';
            for (const it of items){
              const card = document.createElement('div');
              card.className = 'upcoming-event';
              card.innerHTML = '<div class="time"></div><div class="title"></div><div class="scan"></div><div class="trace"></div><div class="flux"></div><div class="stripes"></div><div class="halo"></div><div class="halo2"></div><div class="wires"></div><div class="edges"></div><div class="ripples"></div><div class="orbit"></div>';
              card.querySelector('.time').textContent = it.displayTime || it.time || '';
              card.querySelector('.title').textContent = it.title || '';
              list.appendChild(card);
            }
            // Limit to first 3 visible
            [...list.children].forEach((el,i)=>{ el.style.display = i<3 ? '' : 'none'; });
          }
        }catch(e){}
      })();
    </script>
    <!-- Disabled on this page to avoid overwriting Day 1/next-day render -->
    <!-- <script src="view.js"></script> -->
    <!-- <script src="controller.js"></script> -->
    <!-- <script src="app-display1.js"></script> -->
    <script src="qrcode.min.js"></script>
    <script>
      (function autoSyncDescription(){
        // If ConferenceModel is present, Screen 2 is managed by setRightDescription();
        // skip this fallback to avoid overwriting the correct description.
        if (typeof ConferenceModel !== 'undefined') return;
        function getHighlightedTitle(){
          const el = document.querySelector('.upcoming-event.preview-highlight .title');
          return el ? el.textContent.trim() : null;
        }
        function getDescriptionForTitle(title){
          try{
            if (!title) return null;
            const agenda = (window.conferenceApp && window.conferenceApp.model && typeof window.conferenceApp.model.getAgendaData === 'function')
              ? window.conferenceApp.model.getAgendaData() : null;
            if (Array.isArray(agenda)){
              const found = agenda.find(x => (x.title||'').trim() === title);
              if (found && found.description) return String(found.description).trim();
            }
          }catch(e){}
          return null;
        }
        function update(){
          try {
            const desc = document.querySelector('.panel-right .current-description');
            if (!desc) return;
            const t = getHighlightedTitle();
            const d = getDescriptionForTitle(t);
            desc.textContent = d || 'Event starts soon';
          } catch(e) {}
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => {
            update();
            setInterval(update, 1000);
          });
        } else {
          update();
          setInterval(update, 1000);
        }
      })();
      (function initLocalQR(){
        function make(attempt){
          try{
            var target = document.querySelector('.panel-right .qr-code');
            if (!target || !window.QRCode) return;
            target.innerHTML = '';
            var q = new QRCode(target, { width: 120, height: 120, colorDark: '#000000', colorLight: '#ffffff' });
            q.makeCode('https://nitc.lk');
            // verify a canvas was rendered; retry if not
            if (!target.querySelector('canvas')){
              if ((attempt||0) < 3){ setTimeout(()=>make((attempt||0)+1), 300); }
            }
          }catch(e){}
        }
        if (document.readyState === 'loading'){
          document.addEventListener('DOMContentLoaded', ()=>setTimeout(()=>make(0), 200));
        } else { setTimeout(()=>make(0), 200); }
      })();
      (function exactTimeHighlighter(){
        // If the model is driving the UI, don't run this fallback highlighter.
        if (typeof ConferenceModel !== 'undefined') return;
        function parseMinutes(t){
          if (!t) return null;
          var m=t.trim().match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i); if(!m) return null;
          var hh=parseInt(m[1],10), mm=parseInt(m[2],10), ap=(m[3]||'').toUpperCase();
          if(ap==='PM' && hh<12) hh+=12; if(ap==='AM' && hh===12) hh=0; return hh*60+mm;
        }
        function nowMinutesSL(){
          var nowUtc = Date.now();
          var slMs = nowUtc + Math.round(5.5 * 60 * 60 * 1000);
          var d = new Date(slMs);
          return d.getUTCHours()*60 + d.getUTCMinutes();
        }
        function update(){
          try{
            const items=[...document.querySelectorAll('.upcoming-event')];
            if(!items.length) return;
            const times=items.map(el=>parseMinutes(el.querySelector('.time')?.textContent||''));
            const now=nowMinutesSL();
            let idx=-1;
            const firstIdx = times.findIndex(v=>v!=null);
            if (firstIdx !== -1 && now < times[firstIdx]) {
              idx = -1; // before first item -> no highlight
            } else {
              for(let i=0;i<times.length;i++){ if(times[i]!=null && times[i] <= now) idx=i; }
            }
            items.forEach(el=>el.classList.remove('preview-highlight'));
            if(idx>=0 && items[idx]) items[idx].classList.add('preview-highlight');
          }catch(e){}
        }
        if (document.readyState==='loading'){
          document.addEventListener('DOMContentLoaded', ()=>{ update(); setInterval(update, 30000); });
        } else { update(); setInterval(update, 30000); }
      })();
    </script>
    <script>
      (function autoSyncFromModel(){
        try{
          const model = new ConferenceModel();
          // Prevent external MVC view.js from writing into this page's panels
          try {
            if (window.conferenceApp && window.conferenceApp.view) {
              window.conferenceApp.view.agendaList = null;
              window.conferenceApp.view.currentDetail = null;
            }
          } catch(e){}

          // Keep trying to detach external view targets briefly after load (handles late init)
          (function suppressExternalView(){
            let tries = 0; const maxTries = 20; // ~10 seconds at 500ms
            const iv = setInterval(()=>{
              tries++;
              try{
                const app = window.conferenceApp;
                if (app && app.view) {
                  app.view.agendaList = null;
                  app.view.currentDetail = null;
                  app.view.renderAgendaList = function(){};
                  app.view.renderCurrentEvent = function(){};
                }
                if (app && app.controller) {
                  app.controller.updateDisplay = function(){};
                }
              }catch(e){}
              if (tries >= maxTries) clearInterval(iv);
            }, 500);
          })();
          // Long-running safeguard: keep external MVC disabled
          setInterval(()=>{
            try{
              const app = window.conferenceApp;
              if (app && app.view) {
                app.view.agendaList = null;
                app.view.currentDetail = null;
              }
            }catch(e){}
          }, 3000);
          let countdownTimer = null;
          // Force this display to show Day 2 now
          const FORCE_DAY = 'Day 2';
          let lastShowDay = FORCE_DAY;

          function stopCountdown(){ if (countdownTimer) { clearInterval(countdownTimer); countdownTimer = null; } }

          // Render persistent header above the agenda list
          function renderHeader(day){
            try{
              const hdr = document.getElementById('agendaHeader');
              if (!hdr) return;
              hdr.innerHTML = `
                <img src="NITC.gif" alt="NITC 2025 Logo" style="width:90px;height:90px;object-fit:contain;display:block;margin:8px auto 10px;" />
                <div class="event-title-section">
                  <div class="event-title">EVENT<br>SCHEDULE</div>
                  <div class="event-day">${day}</div>
                </div>
              `;
            }catch(e){}
          }

          function renderAgendaFor(day){
            const list = document.getElementById('agendaList');
            if (!list) return [];
            const items = (model.allAgendaData?.[day] || []);
            // Always rebuild to ensure correct day is shown
            list.innerHTML = '';
            for (const it of items){
              const card = document.createElement('div');
              card.className = 'upcoming-event';
              card.innerHTML = '<div class="time"></div><div class="title"></div><div class="scan"></div><div class="trace"></div><div class="flux"></div><div class="stripes"></div><div class="halo"></div><div class="halo2"></div><div class="wires"></div><div class="edges"></div><div class="ripples"></div><div class="orbit"></div>';
              card.querySelector('.time').textContent = it.displayTime || it.time || '';
              card.querySelector('.title').textContent = it.title || '';
              list.appendChild(card);
            }
            return items;
          }

          function highlightCurrentIndex(day){
            const agenda = model.allAgendaData?.[day] || [];
            const cards = [...document.querySelectorAll('#agendaList .upcoming-event')];
            cards.forEach(el=>el.classList.remove('preview-highlight'));

            function parseMinutesLocal(t){
              if (!t) return null;
              const m = String(t).trim().match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i);
              if (!m) return null;
              let hh = parseInt(m[1],10), mm = parseInt(m[2],10);
              const ap = (m[3]||'').toUpperCase();
              if (ap==='PM' && hh<12) hh+=12;
              if (ap==='AM' && hh===12) hh=0;
              return hh*60+mm;
            }
            function nowMinutesSL(){
              const nowUtc = Date.now();
              const slMs = nowUtc + Math.round(5.5 * 60 * 60 * 1000);
              const d = new Date(slMs);
              return d.getUTCHours()*60 + d.getUTCMinutes();
            }

            const times = agenda.map(it => parseMinutesLocal(it.displayTime || it.time));
            const now = nowMinutesSL();
            let idx = -1;
            const firstIdx = times.findIndex(v => v != null);
            if (firstIdx !== -1 && now < times[firstIdx]) {
              idx = -1; // not started yet -> no highlight
            } else {
              for (let i = 0; i < times.length; i++) {
                if (times[i] != null && times[i] <= now) idx = i;
              }
            }
            if (idx>=0 && cards[idx]) cards[idx].classList.add('preview-highlight');
            return idx;
          }

          function keepHighlightOnTop(idx){
            try{
              const list = document.getElementById('agendaList');
              if (!list) return;
              const cards = [...list.querySelectorAll('.upcoming-event')];
              if (idx>=0 && idx < cards.length){
                const ordered = cards.slice(idx).concat(cards.slice(0, idx));
                // Re-append in new order so highlighted card is first
                for (const el of ordered){ list.appendChild(el); }
              }
            }catch(e){}
          }

          // Ensure only 3 cards are visible at a time (after reordering)
          function limitToThreeCards(){
            try{
              const list = document.getElementById('agendaList');
              if (!list) return;
              const cards = [...list.children];
              for (let i = 0; i < cards.length; i++) {
                cards[i].style.display = (i < 3) ? '' : 'none';
              }
            }catch(e){}
          }

          function setRightDescription(day, idx){
            const descEl = document.querySelector('.panel-right .current-description');
            if (!descEl) return;
            const agenda = model.allAgendaData?.[day] || [];
            // Always show the highlighted item's exact description from the model
            stopCountdown();
            if (idx>=0 && agenda[idx]){
              const item = agenda[idx];
              descEl.textContent = item.description || item.title || 'Event in progress';
            } else {
              descEl.textContent = 'Event starts soon';
            }
          }

          // Utility: current minutes in Sri Lankan time
          function nowMinutesSL(){
            const nowUtc = Date.now();
            const slMs = nowUtc + Math.round(5.5 * 60 * 60 * 1000);
            const d = new Date(slMs);
            return d.getUTCHours()*60 + d.getUTCMinutes();
          }
          function isAfterFiveSL(){
            try { return nowMinutesSL() >= (17*60); } catch { return false; }
          }

          function renderConclusionLeft(){
            try {
              const hdr = document.getElementById('agendaHeader');
              const list = document.getElementById('agendaList');
              if (hdr) hdr.innerHTML = '';
              if (list){
                list.innerHTML = `
                  <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;padding:18px 16px;text-align:center;color:#eaf6ff;">
                    <div style="max-width:340px;display:flex;flex-direction:column;align-items:center;justify-content:center;">
                      <div style="font-family:'Inter',system-ui,sans-serif;font-weight:800;font-size:calc(1.02em + 5px);line-height:1.3;margin-bottom:18px;">Thank You for Being Part of NITC 2025</div>
                      <div style="font-family:'Inter',system-ui,sans-serif;font-weight:600;font-size:calc(1.00em + 4px);line-height:1.4;opacity:.96;margin-bottom:18px;">Let’s continue to innovate, inspire, and shape the future of technology together.</div>
                      <div style="font-family:'Inter',system-ui,sans-serif;font-weight:600;font-size:calc(1.00em + 4px);line-height:1.4;opacity:.96;margin-bottom:22px;">Stay connected for upcoming updates and highlights.</div>
                      <div style="font-family:'Inter',system-ui,sans-serif;font-weight:800;font-size:calc(1.02em + 5px);line-height:1.3;">See you at NITC 2026!</div>
                    </div>
                  </div>`;
              }
            } catch(e) {}
          }

          function apply(){
            try{
              if (typeof model.updateRealTimeEvent === 'function') model.updateRealTimeEvent();
              const dates = model.conferenceDates || {};
              const allDays = model.getAvailableDays();
              const currentDay = model.getCurrentDay();
              let status = model.getConferenceStatus();
              try {
                const todayStr = new Date().toISOString().split('T')[0];
                const cd = dates[currentDay];
                if (cd && todayStr > cd) status = 'completed';
                const curAgenda = model.allAgendaData?.[currentDay] || [];
                if (curAgenda.length) {
                  const last = curAgenda[curAgenda.length - 1];
                  const endMin = model.timeToMinutes(last.time) + (last.duration || 0);
                  const nowMin = model.timeToMinutes(model.getCurrentRealTime());
                  if (nowMin >= endMin) status = 'completed';
                }
              } catch {}

              // Force show Day 2 on Screen 1 regardless of current status
              let showDay = FORCE_DAY || (currentDay === 'Inauguration' ? 'Day 1' : currentDay);

              // If it's after 5:00 PM SLT, show conclusion messages on both screens
              if (isAfterFiveSL()){
                lastShowDay = showDay;
                renderConclusionLeft();
                const descEl = document.querySelector('.panel-right .current-description');
                if (descEl) descEl.textContent = 'The NITC 2025 Conference has successfully concluded.';
                return; // skip agenda rendering/highlighting
              }

              lastShowDay = showDay;
              renderHeader(showDay);
              renderAgendaFor(showDay);
              const hi = highlightCurrentIndex(showDay);
              keepHighlightOnTop(hi);
              limitToThreeCards();
              // Screen 2: status-based description; on completed show countdown to next day
              setRightDescription(showDay, hi);
            }catch(e){}
          }
          apply();
          setInterval(apply, 30000);
          // Re-enforce layout if external scripts mutate the list
          try{
            const list = document.getElementById('agendaList');
            if (list) {
              const obs = new MutationObserver(()=>{
                try {
                  renderHeader(lastShowDay);
                  limitToThreeCards();
                } catch(e) {}
              });
              obs.observe(list, { childList: true });
            }
          }catch(e){}
        }catch(e){}
      })();
    </script>
    <script>
      // Initialize right panel particles on combined page
      (function initRightParticles(){
        function start(){
          if (typeof tsParticles === 'undefined') return;
          const cfg = {
            particles: {
              color: { value: '#ffffff' },
              links: { color: '#ffffff', opacity: 0.3, width: 1, distance: 120 },
              number: { value: 50 },
              opacity: { value: 0.4, random: { enable: true, minimumValue: 0.1 } },
              size: { value: 2, random: { enable: true, minimumValue: 1 } },
              move: { enable: true, speed: 0.2, direction: 'none', random: true, straight: false, outModes: { default: 'bounce' } }
            },
            background: { color: { value: 'transparent' } },
            interactivity: {
              events: { onHover: { enable: true, mode: 'grab' }, onClick: { enable: false } },
              modes: { grab: { distance: 100, links: { opacity: 0.6 } } }
            },
            detectRetina: true,
            fpsLimit: 30
          };
          tsParticles.load('tsparticles-right', cfg).catch(()=>{});
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => setTimeout(start, 800));
        } else {
          setTimeout(start, 800);
        }
      })();

      // Attempt to load external agenda with exact titles/descriptions
      (function loadExternalAgenda(){
        async function run(){
          try {
            const res = await fetch('agenda.json', { cache: 'no-store' });
            if (!res.ok) return;
            const data = await res.json();
            if (window.conferenceApp && window.conferenceApp.model && typeof window.conferenceApp.model.applyExternalAgenda === 'function') {
              window.conferenceApp.model.applyExternalAgenda(data);
              console.log('External agenda loaded from agenda.json');
              // Force refresh
              setTimeout(()=>window.conferenceApp.controller?.updateDisplay?.(), 100);
            }
          } catch(e) {
            console.log('No external agenda.json found; using built-in agenda');
          }
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', run);
        } else {
          run();
        }
      })();
    </script>
  </body>
</html>
